@using UnipiForum.Models
@model UnipiForum.ViewModels.MyProfileViewModel


<h3>My profile</h3>

@helper SelectedTabClass(string tabName)
    {
        if (tabName == ViewBag.SelectedTab)
        {
            @: active
        }
}
<!DOCTYPE html>
<html>
<head>
    <title>Unipi Forum Admin</title>
    @Styles.Render("~/styles")
</head>
<body>
    <div class="container">
        <ul class="nav nav-pills">
            <li class="@(SelectedTabClass("myprofilepage"))">
                @Html.ActionLink("My Profile", "MyProfilePage", "UserProfile", new { })
            </li>
            <li class="@(SelectedTabClass("results"))">
                @Html.ActionLink("Results", "Results", "UserProfile", new { })
            </li>
            @using (var context = new unipiforumSQLEntities2())
            {
                if (User.IsInRole("") || User.IsInRole("student") && (context.users.FirstOrDefault(p => p.username == User.Identity.Name).group_id != null))
                {
                    <li class="@(SelectedTabClass("usergroups"))">
                        @Html.ActionLink("Go to my Group", "UsGroup", "UserProfile", new { })
                    </li>
                }
            }
        </ul>

    </div>

    <form class="Hidden" id="anti-forgery-form">
        @Html.AntiForgeryToken()
    </form>


    @*<h1>Hi @Model.Users.username</h1>*@

    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()

        @Html.ValidationSummary()
        <div class="form-group">
            @Html.LabelFor(f => f.Users.user_university_id, "University ID")
            @Html.TextBoxFor(f => f.Users.user_university_id, new { @class = "form-control", @readonly = "readonly" })
        </div>
        <div class="form-group">
            @Html.LabelFor(f => f.Users.username, "Username")
            @Html.TextBoxFor(f => f.Users.username, new { @class = "form-control" })
        </div>

        <div class="form-group">
            @Html.LabelFor(f => f.Users.email, "Email")
            @Html.TextBoxFor(f => f.Users.email, new { @class = "form-control", type = "email" })
        </div>


        <input type="submit" value="Update User" class="btn btn-primary" />
        <a href="@Url.Action("MyProfilePage")">or Cancel</a>
    }



</body>
</html>

